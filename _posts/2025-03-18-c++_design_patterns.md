---
title: C++设计模式
author: FrothyJin
date: 2025-03-18
category: Jekyll
layout: post
mermaid: true
---

**Q： 为什么需要设计模式？**<br>
**A：** 设计模式是解决软件设计问题的经典解决方案，感觉简单来说，就是前辈们经过长时间摸索出来的解决常见问题的一套参考答案。

C++中常用的设计模式可以分为三大类：创建型模式、结构型模式和行为型模式（复杂的分类方式，咱也不懂）

## 一、单例模式

**Q： 什么是单例模式？**<br>
**A：** 简单来说，确保一个类只有一个实例，并提供一个全局访问点。复杂来说，就是越说越复杂。

**Q： 可以解决什么问题？**<br>
**A：** 多线程环境中，单例模式可以确保在多线程环境中只有一个实例被创建，避免竞争条件。

单例又分为懒汉式和饿汉式：
- 懒汉式：解决了饿汉式内存浪费问题，即在**需要时才创建单例对象**，而不是在程序启动时就创建，但是线程不安全的，可以通过互斥锁mutex.lock()和mutex.unlock()来解决
- 饿汉式：还没有使用该单例对象，该单例对象就已经被加载到内存了，在对象过多时会造成内存浪费


懒汉实现四步走：
1. 私有化构造函数，防止外部直接创建对象。
1. 定义静态成员变量保存唯一实例。
1. 提供静态成员函数获取实例。
1. 禁止拷贝和赋值。


## 二、工厂模式

**Q： 什么是工厂模式？**<br>
**A：** 


